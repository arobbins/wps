webpackHotUpdate(0,{199:function(module,exports,__webpack_require__){"use strict";eval("/* WEBPACK VAR INJECTION */(function(validate, $) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initCheckout = undefined;\n\nvar _regenerator = __webpack_require__(34);\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _debounce = __webpack_require__(331);\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nvar _utils = __webpack_require__(45);\n\nvar _steps = __webpack_require__(200);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconsole.log(\"ok ok wewe: \", validate); // import validate from \"jquery-validation\";\n\n\n/*\n\nOn account cat click\n\n*/\nfunction onAskExisting() {\n\n  var $loginForm = $(\"#edd_checkout_login_register\"),\n      $registerForm = $(\"#edd_checkout_user_info\"),\n      $submitContainer = $(\"#edd_purchase_submit\");\n\n  $('#edd-user-login-submit .button').val('Login and checkout');\n  // $registerForm.addClass('animated bounceInTop');\n\n  $(\"#card_number\").attr('type', 'text');\n\n  // TODO: Put somewhere that makes sense\n  $registerForm.addClass('animated zoomIn');\n  $('.wps-checkout-login-container').height($registerForm.height() + 60);\n\n  $('.component-ask-existing').on('click', '.button', function _callee(e) {\n    var $element, $parent;\n    return _regenerator2.default.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n\n            e.preventDefault();\n\n            $element = $(this);\n            $parent = $element.parent();\n\n\n            $loginForm.removeClass('animated bounceInTop');\n            $registerForm.removeClass('animated bounceInTop');\n            $submitContainer.removeClass('is-visible');\n\n            $parent.children().removeClass('is-active is-disabled');\n            $element.addClass('is-active');\n            $parent.find('.button:not(.is-active)').addClass('is-disabled');\n\n            if ($element.data('checkout-path') === 'login') {\n              $loginForm.addClass('animated bounceInTop');\n              $submitContainer.removeClass('is-visible');\n            } else {\n              $registerForm.addClass('animated bounceInTop');\n              $submitContainer.addClass('is-visible');\n            }\n\n          case 10:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, null, this);\n  });\n}\n\n/*\n\nSave Checkout State\n\n*/\nfunction saveCheckoutState() {\n\n  var $ccFields = $('#edd_cc_fields'),\n      $ccAddress = $('#edd_cc_address').prop('outerHTML'),\n      $ccSubmit = $('#edd_purchase_submit').prop('outerHTML');\n\n  $ccFields.find(\"#card_number\").val('');\n  $ccFields = $ccFields.prop('outerHTML');\n\n  localStorage.setItem('wps-checkout-form', $ccFields + $ccAddress + $ccSubmit);\n}\n\n/*\n\nInsert Saved Checkout Form\n\n*/\nfunction insertSavedCheckoutForm() {\n  $('.wps-checkout-login-container').after($(localStorage.getItem('wps-checkout-form')));\n}\n\n/*\n\nRemoving Billing Inputs\n\n*/\nfunction removeBillingInputs() {\n  $('#edd_cc_fields').remove();\n  $('#edd_cc_address').remove();\n  $('#edd_purchase_submit').remove();\n}\n\n/*\n\nOn Login Link\n\n*/\nfunction onLoginLink() {\n\n  var $loginForm = $(\"#edd_checkout_login_register\"),\n      $registerForm = $(\"#edd_checkout_user_info\"),\n      $submitContainer = $(\"#edd_purchase_submit\");\n\n  $('.wps-welcome-link').on('click', function (e) {\n    e.preventDefault();\n\n    var $activeContainer = $(this).closest('.animated');\n\n    if ($activeContainer.attr('id') === 'edd_checkout_login_register') {\n\n      insertSavedCheckoutForm();\n      setScrollScene();\n\n      $activeContainer.animateCss('zoomOut', function () {\n        $activeContainer.removeClass('animated zoomIn zoomOut');\n      });\n\n      $registerForm.animateCss('zoomIn', function () {\n        console.log('done reg');\n      });\n    } else {\n\n      $activeContainer.animateCss('zoomOut', function () {\n        console.log('done active');\n        $activeContainer.removeClass('animated zoomIn zoomOut');\n      });\n\n      /*\n       Reset sticky\n       */\n      removeBillingInputs();\n\n      $loginForm.animateCss('zoomIn', function () {\n        console.log('done login');\n      });\n    }\n  });\n}\n\n/*\n\nSetting the Scroll Magic sticky nav\n\n*/\nfunction setScrollScene() {\n  var controller = new ScrollMagic.Controller();\n\n  // Scene1 Handler\n  var scene1 = new ScrollMagic.Scene({\n    duration: 0,\n    triggerElement: '#edd_cc_fields',\n    triggerHook: 0\n  }).setClassToggle(\"#edd_checkout_cart_form\", \"is-stuck\").on('start', function () {\n    console.log('111');\n    $('#edd_checkout_cart_form').toggleClass('animated fadeIn');\n  }).setPin(\"#edd_checkout_cart_form\");\n\n  // Add Scenes to ScrollMagic Controller\n  controller.addScene([scene1]);\n\n  detectDestroy(controller, scene1);\n}\n\n/*\n\nScroll Magic Scene Destroy Handler\n\n*/\nfunction detectDestroy(controller, scene) {\n\n  $('.wps-welcome-link').on('click', function (e) {\n    e.preventDefault();\n\n    var $activeContainer = $(this).closest('.animated');\n\n    if ($activeContainer.attr('id') === 'edd_checkout_login_register') {} else {\n      controller.destroy();\n      scene.destroy();\n    }\n  });\n}\n\n/*\n\nModify all default form attributes here\n\n*/\nfunction initFormState() {\n  $('.is-registered-and-purchasing #edd_checkout_user_info input').prop('readonly', true);\n  $('#card_exp_month, #card_exp_year').attr('name', 'cardExpYear');\n  $('#card_number').attr('name', 'edd_credit_card');\n  $('#card_cvc').attr('name', 'edd_cvc');\n  $('#card_name').attr('name', 'edd_card_name');\n\n  $('#edd-purchase-button').prop('disabled', true);\n\n  // allCheckoutFieldsValid();\n}\n\nfunction isFormValid(valid) {\n\n  if (valid) {\n    console.log(\"final - valid\");\n    $('#edd-purchase-button').prop('disabled', false);\n  } else {\n    console.log(\"final - not valid\");\n    $('#edd-purchase-button').prop('disabled', true);\n  }\n}\n\n/*\n\nValidate Checkout Form\n\n*/\nfunction validateCheckoutForm() {\n\n  var validate = $(\"#edd_purchase_form\").validate({\n    rules: {\n      cardExpYear: {\n        CCExp: {\n          month: '#card_exp_month'\n        }\n      },\n      edd_card_name: {\n        required: true\n      },\n      card_address: {\n        required: true\n      },\n      card_city: {\n        required: true\n      },\n      card_zip: {\n        required: true\n      },\n      billing_country: {\n        required: true\n      },\n      edd_credit_card: {\n        creditcard: true,\n        required: true\n      },\n      edd_email: {\n        remote: {\n          url: \"/wp/wp-admin/admin-ajax.php\",\n          type: \"post\",\n          data: {\n            action: 'wps_check_existing_username',\n            email: function email() {\n              return $(\"#edd-email\").val();\n            }\n          }\n        },\n        email: true,\n        required: true\n      },\n      edd_cvc: {\n        required: true,\n        pattern: /^[0-9]{3,4}$/\n      },\n      edd_first: {\n        required: true\n      }\n    },\n    messages: {\n      cardExpYear: \"Please choose a valid date\",\n      CCExp: {\n        month: 'Valid month required'\n      },\n      edd_email: {\n        email: \"Please enter a valid email address\",\n        required: \"Email is required\",\n        remote: 'Email address already taken. Do you want to <a href=\"\" class=\"wps-welcome-link\">login</a> instead?'\n      },\n      edd_credit_card: {\n        creditcard: \"Please enter a valid credit card\",\n        required: \"Credit card is required\"\n      },\n      edd_first: {\n        required: \"First name is required\"\n      },\n      edd_cvc: {\n        required: \"CVC is required\",\n        pattern: \"Must be a number between 3-4 digits long\"\n      },\n      edd_card_name: {\n        required: \"Name is required\"\n      },\n      card_address: {\n        required: \"Billing Address is required\"\n      },\n      card_city: {\n        required: \"Billing City is required\"\n      },\n      card_zip: {\n        required: \"Billing Zip is required\"\n      },\n      billing_country: {\n        required: \"Country is required\"\n      },\n      card_state: {\n        required: \"State / province is required\"\n      }\n    },\n    highlight: function highlight(element) {\n\n      // console.log('has error', element);\n      $(element).parent().find('.is-valid').remove();\n\n      // validate.showErrors();\n    },\n    unhighlight: function unhighlight(element) {\n\n      // console.log('corrected error', element);\n\n      if ($(element).attr('name') === 'edd_email') {\n\n        // $(element).prop('disabled', true);\n\n        setTimeout(function () {\n          if (!$(element).parent().find('label.error').is(':visible') && !$(element).hasClass('error')) {\n            // console.log('valid');\n            $(element).parent().find('.is-valid').remove();\n            $(element).parent().find('label.error').hide();\n            $(element).parent().append('<span class=\"is-valid\"></span>');\n          } else {\n            // console.log('NOT valid');\n\n          }\n        }, 250);\n      } else {\n        var okoko = $(element).parent().find('label.error').is(':visible');\n        // console.log(\"okoko: \", okoko);\n\n        if (!$(element).parent().find('label.error').is(':visible') && !$(element).hasClass('error')) {\n          // console.log('valid');\n          $(element).parent().find('.is-valid').remove();\n          $(element).parent().find('label.error').hide();\n          $(element).parent().append('<span class=\"is-valid\"></span>');\n        } else {\n          // console.log('NOT valid');\n          // $(element)[0].setCustomValidity('Invalid');\n        }\n      }\n    }\n\n  });\n\n  checkFormValiditity(validate);\n}\n\nfunction hasValue(element) {\n  return $(element).filter(function () {\n    return $(this).val();\n  }).length > 0;\n}\n\nfunction checkFields() {\n\n  var $requiredFields = $(\"#edd_purchase_form input.required, #edd_purchase_form select.required\");\n\n  var remainingRequiredFields = $requiredFields.filter(function () {\n    return !this.value;\n  });\n  // console.log(\"Required fields: \", remainingRequiredFields);\n\n  if (remainingRequiredFields.length) {\n    console.log('Has empty required fields', remainingRequiredFields);\n  } else {\n    console.log('All required filled', remainingRequiredFields);\n\n    console.log('eeeeerrrrrrs: ', validate.errorList);\n\n    if (validate.errorList.length) {\n\n      // console.log('Has errors: ', validate.errorList);\n\n      $('#edd-purchase-button').prop('disabled', true);\n    } else {\n\n      // console.log(\"Required fields: \", $requiredFields);\n      $('#edd-purchase-button').prop('disabled', false);\n    }\n  }\n}\n\nfunction checkFormValiditity(validate) {\n\n  var $allFields = $(\"#edd_purchase_form input, #edd_purchase_form select\");\n\n  $allFields.on('keyup change blur', (0, _debounce2.default)(checkFields, 150));\n}\n\n/*\n\nToggle Checkout Form State During Submit\n\n*/\nfunction toggleCheckoutFormStateDuringSubmit() {\n  var $errorsContainer = $('#edd-stripe-payment-errors'),\n      $checkoutSubmitButton = $(\"#edd-purchase-button\");\n\n  $checkoutSubmitButton.on('click', function () {\n\n    $errorsContainer.empty();\n\n    var $button = $(this);\n\n    var loop = setInterval(function checkFormState() {\n      var $errorContainer = $button.closest('form').find(\"#edd-stripe-payment-errors .edd_errors\");\n\n      var errortest = $button.closest('form').find(\"#edd-email-error\").is(':visible');\n\n      if ($errorContainer.length || errortest) {\n        console.log('here');\n        (0, _utils.enableForm)($button.closest('form'));\n        (0, _utils.hideLoader)($button.closest('form'));;\n        clearInterval(loop);\n      } else {\n        console.log('sfssdfhere');\n        (0, _utils.disableForm)($button.closest('form'));\n        (0, _utils.showLoader)($button.closest('form'));\n      }\n    }, 200);\n  });\n}\n\n/*\n\nInit Account\n\n*/\nfunction initCheckout() {\n\n  onAskExisting();\n  onLoginLink();\n  (0, _steps.initCheckoutSteps)();\n  setScrollScene();\n\n  initFormState();\n\n  validateCheckoutForm();\n\n  toggleCheckoutFormStateDuringSubmit();\n\n  saveCheckoutState();\n\n  console.log('22222');\n}\n\nexports.initCheckout = initCheckout;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(60), __webpack_require__(8)))\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/js/app/checkout/checkout.js\n// module id = 199\n// module chunks = 0\n\n//# sourceURL=webpack:///./assets/js/app/checkout/checkout.js?")}});