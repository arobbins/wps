'use strict';

var _ws = require('../ws/ws');

function initPlugins() {

  /*
   Animate
   */
  $.fn.extend({
    animateCss: function animateCss(animationName, callback) {
      var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
      this.addClass('animated ' + animationName).one(animationEnd, callback);
    }
  });

  /*
   jQuery Validate: Check for expired credit card date
   */
  $.validator.addMethod('CCExp', function (value, element, params) {

    var $month = $(element).parent().find("#card_exp_month");
    var $year = $(element).parent().find("#card_exp_year");

    console.log("$month: ", $month);
    console.log("$year: ", $year);

    var minMonth = new Date().getMonth() + 1;
    var minYear = new Date().getFullYear();
    var month = parseInt($month.val(), 10);
    var year = parseInt($year.val(), 10);

    console.log("month: ", month);
    console.log("year: ", year);

    return !month || !year || year > minYear || year === minYear && month >= minMonth;
  }, 'Your Credit Card Expiration date is invalid.');

  /*
   jQuery Validate: Check for correct cvc
   */
  $.validator.addMethod('cardcvc', function (value, element, params) {

    return regexpr.test(value);
  }, 'Must be a number between 3-4 digits long');
}

initPlugins();